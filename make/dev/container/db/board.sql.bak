drop database if exists board;
create database board charset = utf8;

use board;

create table user (
 user_id int NOT NULL AUTO_INCREMENT,
# The max length of username controlled by API is 20, 
# and 11 is reserved for marking the deleted users.
# The mark of deleted user is "#user_id".
# The 11 consist of 10 for the max value of user_id(4294967295)  
# in MySQL and 1 of '#'.
 username varchar(32),
# 11 bytes is reserved for marking the deleted users.
 email varchar(255),
 password varchar(40) NOT NULL,
 realname varchar (20),
 comment varchar (30),
 deleted tinyint (1) DEFAULT 0,
 system_admin tinyint (1) DEFAULT 0,
 project_admin tinyint (1) DEFAULT 0,
 reset_uuid varchar(40) DEFAULT NULL,
 salt varchar(40) DEFAULT NULL,
 creation_time timestamp,
 update_time timestamp,
 primary key (user_id),
 UNIQUE (username),
 UNIQUE (email)
);

insert into user (username, email, password, realname, comment, deleted, system_admin, project_admin, creation_time, update_time) values 
('admin', 'admin@example.com', '123456a?', 'system admin', 'admin user',0, 1, 1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
('anonymous', 'anonymous@example.com', '', 'anonymous user', 'anonymous user', 1, 0, 0, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
