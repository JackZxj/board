<clr-modal [(clrModalOpen)]="isOpen" [clrModalSize]="'md'" (click)="isAlertClose = true">
  <h3 class="modal-title">{{ 'HEAD_NAV.ACCOUNT_SETTINGS' | translate }}</h3>
  <div class="modal-body">
    <form #accountSettingForm="ngForm" (ngSubmit)="submitAccountSetting()">
      <div class="hide-error-msg">
        <clr-alert [clrAlertType]="'alert-danger'"
                   [clrAlertSizeSmall]="true"
                   [(clrAlertClosed)]="isAlertClose">
          <div class="alert-item">
            <span class="alert-text">{{errMessage | translate}}</span>
          </div>
        </clr-alert>
      </div>
      <div class="form-group">
        <label style="color: black">{{ 'ACCOUNT.USERNAME' | translate }}</label>
        <label style="color: black">{{curUser.user_name}}</label>
      </div>
      <div class="form-group">
        <label for="txtEmail" class="required">{{ 'ACCOUNT.EMAIL' | translate }}</label>
        <label for="txtEmail" aria-haspopup="true" role="tooltip"
               class="tooltip tooltip-validation tooltip-md  tooltip-top-left"
               [class.invalid]="emailInput.invalid && (emailInput.dirty || emailInput.touched)">
          <input type="email"
                 class="input-style"
                 id="txtEmail"
                 placeholder="{{curUser.user_email}}"
                 required
                 name="email"
                 [(ngModel)]="curUser.user_email"
                 #emailInput="ngModel"
                 checkItemPattern="email"
                 checkItemExisting="email" userID="{{curUser.user_id}}"
                 validate-onblur>
          <span class="tooltip-content"
                *ngIf="emailInput.errors && emailInput.errors.required">
                {{ 'ACCOUNT.EMAIL_IS_REQUIRED' | translate }}
          </span>
          <span class="tooltip-content"
                *ngIf="emailInput.errors && emailInput.errors.checkItemPattern">
                {{ 'ACCOUNT.EMAIL_IS_ILLEGAL' | translate }}
          </span>
          <span class="tooltip-content" 
                *ngIf="emailInput.errors && emailInput.errors.checkItemExisting">
                {{ 'ACCOUNT.EMAIL_ALREADY_EXISTS' | translate }}
          </span>
        </label>
      </div>
      <div class="form-group">
        <label for="txtRealName">{{ 'ACCOUNT.REALNAME' | translate }}</label>
        <input type="text"
               class="input-style"
               id="txtRealName"
               name="txtRealName"
               placeholder="{{curUser.user_realname}}"
               required
               [(ngModel)]="curUser.user_realname"
               maxlength="22"
               validate-onblur>
      </div>
      <div class="form-group">
        <label for="txtComment">{{ 'ACCOUNT.COMMENT' | translate }}</label>
        <input type="text"
               class="input-style"
               id="txtComment"
               name="txtComment"
               placeholder="{{curUser.user_comment}}"
               required
               [(ngModel)]="curUser.user_comment"
               maxlength="100"
               validate-onblur>
      </div>
      <div class="form-group">
        <button type="submit"
                class="btn btn-primary"
                [disabled]="accountSettingForm.invalid || !isAlertClose">
          {{ "BUTTON.OK" | translate }}
        </button>
        <button type="button"
                class="btn btn-default"
                (click)="isOpen = false">
          {{ 'BUTTON.CANCEL' | translate}}
        </button>
      </div>
    </form>
  </div>
</clr-modal>