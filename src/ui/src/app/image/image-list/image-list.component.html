<div *ngIf="!isBuildImageWIP" class="image-list-container">
  <image-detail *ngIf="isShowDetail"
                [curImage]="curImage"
                [(isOpen)]="isShowDetail"
                (reload)="retrieve()">
  </image-detail>
  <button class="btn btn-primary build-image"
          (click)="createImage()">
    {{ 'IMAGE.CREATE_IMAGE_BUILD_IMAGE' | translate }}
  </button>
  <clr-datagrid [clrDgLoading]="loadingWIP">
    <clr-dg-placeholder>{{imageListErrMsg | translate}}</clr-dg-placeholder>
    <clr-dg-column>{{ 'IMAGE.COL_IMAGE_NAME' | translate }}</clr-dg-column>
    <clr-dg-column>{{ 'IMAGE.COL_COMMENT' | translate }}</clr-dg-column>
    <clr-dg-column>{{ 'IMAGE.COL_OPERATION' | translate }}</clr-dg-column>
    <clr-dg-row *clrDgItems="let image of imageList">
      <clr-dg-cell>{{image.image_name}}</clr-dg-cell>
      <clr-dg-cell>{{image.image_comment}}</clr-dg-cell>
      <clr-dg-cell>
        <a href="javascript:void(0)" (click)="showImageDetail(image)">
          <clr-icon shape="info-standard"></clr-icon>
        </a>
        <a href="javascript:void(0)">
          <clr-icon shape="trash"
                    class="action"
                    [ngClass]="{'disabled':!isSystemAdmin}"
                    (click)="confirmToDeleteImage(image.image_name)">
          </clr-icon>
        </a>
      </clr-dg-cell>
    </clr-dg-row>
    <clr-dg-footer>
      {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}} of {{pagination.totalItems}} items
      <clr-dg-pagination #pagination [clrDgTotalItems]="imageList.length" [clrDgPageSize]="imageCountPerPage">
      </clr-dg-pagination>
    </clr-dg-footer>
  </clr-datagrid>
</div>

<div *ngIf="isBuildImageWIP" class="build-image-container">
  <span>{{"IMAGE.CREATE_IMAGE_SELECT_PROJECT"|translate}}:</span>
  <cs-dropdown class="custom-margin"
               [dropdownDefaultText]="'IMAGE.CREATE_IMAGE_SELECT_PROJECT'|translate"
               [dropdownWidth]="200"
               [dropdownList]="projectsList"
               [dropdownListTextKey]="'project_name'"
               (onChange)="changeSelectProject($event)"
               (onOnlyClickItem)="clickSelectProject($event)"></cs-dropdown>
  <span class="custom-margin">{{"IMAGE.CREATE_IMAGE_SELECT_DES"|translate}}</span>
  <div class="import-method-container">
    <input title=""
           type="radio"
           id="fromTemplate"
           [disabled]="selectedProjectId == 0"
           name="buildMethod"
           (click)="setCreateImageMethod(1)">
    <label for="fromTemplate"
           [ngClass]="{'disabled':selectedProjectId == 0,'enable':selectedProjectId > 0}">
      {{"IMAGE.CREATE_IMAGE_TEMPLATE"|translate}}
    </label>
  </div>
  <div class="import-method-container">
    <input title=""
           type="radio"
           id="fromDockerFile"
           [disabled]="selectedProjectId == 0"
           name="buildMethod"
           (click)="setCreateImageMethod(2)">
    <label for="fromDockerFile"
           [ngClass]="{'disabled':selectedProjectId == 0,'enable':selectedProjectId > 0}">
      {{"IMAGE.CREATE_IMAGE_DOCKER_FILE"|translate}}
    </label></div>
  <div class="import-method-container">
    <input title=""
           type="radio"
           id="fromDevOps"
           [disabled]="true"
           name="buildMethod"
           (click)="setCreateImageMethod(3)">
    <label for="fromDevOps" class="disabled">
      {{"IMAGE.CREATE_IMAGE_DEVOPES"|translate}}
    </label>
  </div>
  <div class="build-btn-container">
    <button class="btn btn-default cancel-build"
            (click)="isBuildImageWIP = false">
      {{"BUTTON.CANCEL"|translate}}
    </button>
    <button class="btn btn-primary"
            [disabled]="createImageMethod == 0"
            (click)="isOpenNewImage = true">
      {{"BUTTON.CREATE"|translate}}
    </button>
  </div>
  <create-image
    *ngIf="isOpenNewImage"
    [(isOpen)]="isOpenNewImage"
    [imageBuildMethod]="createImageMethod - 1"
    [projectName]="selectedProjectName"
    [projectId]="selectedProjectId"
    (onBuildCompleted)="onBuildImageCompleted($event)">
  </create-image>
</div>