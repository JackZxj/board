<div *ngIf="hideMaxGrafanaWindow" style="display: flex;flex-wrap: nowrap">
  <div class="section-container split-line">
    <div class="section-image-container">
      <div class="circle">
        <img class="section-image" src="../../images/service_icon.png" alt="service icon"/>
      </div>
      <span class="section-text">{{ 'DASHBOARD.SERVICE' | translate }}</span>
    </div>
    <div class="section-right-container">
      <div class="section-right-container-container">
        <span class="stat-panel-title">{{ 'DASHBOARD.PODS' | translate }}:</span>
        <span class="stat-panel-title">{{ 'DASHBOARD.CONTAINERS' | translate }}:</span>
      </div>
      <div class="section-right-container-container">
        <span class="stat-panel-value-font">{{curRealTimeValue.get(0)?.curFirst}}</span>
        <span class="stat-panel-value-font">{{curRealTimeValue.get(0)?.curSecond}}</span>
      </div>
    </div>
  </div>
  <div class="section-container split-line">
    <div class="section-image-container">
      <div class="circle">
        <img class="section-image" src="../../images/node_icon.png" alt="node icon"/>
      </div>
      <span class="section-text">{{ 'DASHBOARD.NODE' | translate }}</span>
    </div>
    <div class="section-right-container">
      <div class="section-right-container-container">
        <span class="stat-panel-title">{{ 'DASHBOARD.CPU' | translate }}:</span>
        <span class="stat-panel-title">{{ 'DASHBOARD.MEMORY' | translate }}:</span>
      </div>
      <div class="section-right-container-container">
        <span class="stat-panel-value-font">{{curRealTimeValue.get(1)?.curFirst}}%</span>
        <span class="stat-panel-value-font">{{curRealTimeValue.get(1)?.curSecond}}%</span>
      </div>
    </div>
  </div>
  <div class="section-container">
    <div class="section-image-container">
      <div class="circle">
        <img class="section-image" src="../../images/storage_icon.png" alt="storage icon"/>
      </div>
      <span class="section-text">{{ 'DASHBOARD.STORAGE' | translate }}</span>
    </div>
    <div class="section-right-container">
      <div class="section-right-container-container">
        <span class="stat-panel-title">{{ 'DASHBOARD.USAGE' | translate }}:</span>
        <span class="stat-panel-title">{{ 'DASHBOARD.TOTAL' | translate }}:</span>
      </div>
      <div class="section-right-container-container">
        <span class="stat-panel-value-font">{{curRealTimeValue.get(2)?.curFirst}}{{StorageUnit}}</span>
        <span class="stat-panel-value-font">{{curRealTimeValue.get(2)?.curSecond}}{{StorageUnit}}</span>
      </div>
    </div>
  </div>
</div>

<div *ngIf="hideMaxGrafanaWindow" class="card">
  <div class="card-header">{{'DASHBOARD.SERVICE' | translate }}</div>
  <div class="card-block line-area-block">
    <div class="card-block-top-container">
      <cs-dropdown [dropdownDefaultText]="getCurLineName(0)"
                   [dropdownWidth]="200"
                   [dropdownDisabled]="lineStateInfo.get(0)?.inRefreshWIP || !lineStateInfo.get(0)"
                   [dropdownList]="getLinesName(0)"
                   (onChange)="dropDownChange(0,$event)">
      </cs-dropdown>
      <a href="javascript:void(0)" (click)="refreshLine()" class="refresh"
         [class.disabled]="lineStateInfo.get(0)?.inRefreshWIP || !lineStateInfo.get(0)">
        <clr-icon shape="refresh" class="refresh"></clr-icon>
      </a>
      <div class="caption_container">
        <span class="first-line">{{ 'DASHBOARD.PODS' | translate }}:{{curValue.get(0)?.curFirst}}</span>
        <span class="second-line">{{ 'DASHBOARD.CONTAINERS' | translate }}:{{curValue.get(0)?.curSecond}}</span>
      </div>
      <time-range-scale class="range-scale"
                        [disabled]="lineStateInfo.get(0)?.inRefreshWIP || !lineStateInfo.get(0)"
                        [options]="scaleOptions"
                        [curScale]="query.get(0) ? query.get(0).scale:{}"
                        (scaleChange)="scaleChange(0,$event)">
      </time-range-scale>
    </div>
    <div class="card-block-bottom-container">
      <div *ngIf="noData.get(0)" class="no-data-mask"><span>{{ noDataErrMsg.get(0) | translate }}</span></div>
      <div echarts
           (chartInit)="onEChartInit(0,$event)"
           [options]="lineOptions.get(0)"
           [loading]="lineStateInfo.get(0)?.inRefreshWIP"
           (mouseup)="chartMouseUp(0,$event)"
           (chartDataZoom)="chartDataZoom(0,$event)"
           style="height: 300px">
      </div>
    </div>
  </div>
</div>

<div *ngIf="hideMaxGrafanaWindow" class="card">
  <div class="card-header">{{'DASHBOARD.NODE' | translate }}</div>
  <div class="card-block line-area-block">
    <div class="card-block-top-container">
      <cs-dropdown [dropdownDefaultText]="getCurLineName(1)"
                   [dropdownWidth]="200"
                   [dropdownDisabled]="lineStateInfo.get(1)?.inRefreshWIP || !lineStateInfo.get(1)"
                   [dropdownList]="getLinesName(1)"
                   (onChange)="dropDownChange(1,$event)">
      </cs-dropdown>
      <a href="javascript:void(0)" (click)="refreshLine()" class="refresh"
         [class.disabled]="lineStateInfo.get(1)?.inRefreshWIP || !lineStateInfo.get(1)">
        <clr-icon shape="refresh" class="refresh"></clr-icon>
      </a>
      <div class="caption_container">
        <span class="first-line">{{ 'DASHBOARD.CPU' | translate }}:{{curValue.get(1)?.curFirst}}%</span>
        <span class="second-line">{{ 'DASHBOARD.MEMORY' | translate }}:{{curValue.get(1)?.curSecond}}%</span>
      </div>
      <div class="select-time-container">
        <time-range-scale [curScale]="query.get(1) ? query.get(1).scale:{}"
                          (scaleChange)="scaleChange(1,$event)"
                          [disabled]="lineStateInfo.get(1)?.inRefreshWIP || !lineStateInfo.get(1)"
                          [options]="scaleOptions">
        </time-range-scale>
      </div>
    </div>
    <div class="card-block-bottom-container">
      <div *ngIf="noData.get(1)" class="no-data-mask">
        <span>{{ noDataErrMsg.get(1) | translate }}</span>
      </div>
      <div echarts
           (chartInit)="onEChartInit(1,$event)"
           [options]="lineOptions.get(1)"
           [loading]="lineStateInfo.get(1)?.inRefreshWIP"
           (mouseup)="chartMouseUp(1,$event)"
           (chartDataZoom)="chartDataZoom(1,$event)"
           style="height: 300px">
      </div>
    </div>
  </div>
</div>

<div *ngIf="hideMaxGrafanaWindow" class="card">
  <div class="card-header">{{'DASHBOARD.STORAGE' | translate }}</div>
  <div class="card-block line-area-block">
    <div class="card-block-top-container">
      <cs-dropdown [dropdownDefaultText]="getCurLineName(2)"
                   [dropdownWidth]="200"
                   [dropdownDisabled]="lineStateInfo.get(2)?.inRefreshWIP || !lineStateInfo.get(2)"
                   [dropdownList]="getLinesName(2)"
                   (onChange)="dropDownChange(2,$event)">
      </cs-dropdown>
      <a href="javascript:void(0)" (click)="refreshLine()" class="refresh"
         [class.disabled]="lineStateInfo.get(2)?.inRefreshWIP || !lineStateInfo.get(2)">
        <clr-icon shape="refresh" class="refresh"></clr-icon>
      </a>
      <div class="caption_container">
        <span class="first-line">{{ 'DASHBOARD.USAGE' | translate }}:{{curValue.get(2)?.curFirst}}{{StorageUnit}}</span>
        <span
           class="second-line">{{'DASHBOARD.TOTAL' | translate }}:{{curValue.get(2)?.curSecond}}{{StorageUnit}}</span>
      </div>
      <div class="select-time-container">
        <time-range-scale [curScale]="query.get(2) ? query.get(2).scale:{}"
                          (scaleChange)="scaleChange(2,$event)"
                          [disabled]="lineStateInfo.get(2)?.inRefreshWIP || !lineStateInfo.get(2)"
                          [options]="scaleOptions">
        </time-range-scale>
      </div>
    </div>
    <div class="card-block-bottom-container">
      <div *ngIf="noData.get(2)" class="no-data-mask">
        <span>{{ noDataErrMsg.get(2) | translate }}</span>
      </div>
      <div echarts
           (chartInit)="onEChartInit(2,$event)"
           (mouseup)="chartMouseUp(2,$event)"
           [options]="lineOptions.get(2)"
           [loading]="lineStateInfo.get(2)?.inRefreshWIP"
           (chartDataZoom)="chartDataZoom(2,$event)"
           style="height: 300px">
      </div>
    </div>
  </div>
</div>

<div *ngIf="showGrafanaWindow" class="card" [class.grafana-container]="showMaxGrafanaWindow">
  <div class="card-header grafana-container-header">
    <span class="grafana-card-title">Grafana dashboard</span>
    <a *ngIf="showMaxGrafanaWindow" href="javascript:void(0)" (click)="showMaxGrafanaWindow = false">
      <clr-icon shape="window-min" class="detail"></clr-icon>
    </a>
    <a *ngIf="hideMaxGrafanaWindow" href="javascript:void(0)" (click)="showMaxGrafanaWindow = true">
      <clr-icon shape="window-max" class="detail"></clr-icon>
    </a>
  </div>
  <div class="card-block" [ngStyle]="{height:showMaxGrafanaWindow?'100%':'300px'}">
    <iframe height="100%" width="100%" frameborder="0" [src]="grafanaViewUrl | safe">
      {{"DASHBOARD.GRAFANA_FRAME_SUPPORT" | translate}}
    </iframe>
  </div>
</div>