<clr-tabs>
  <clr-tab>
    <button clrTabLink>{{"SERVICE.STEP_3_SERVICE_CONFIG_TITLE" | translate}}</button>
    <ng-template [(clrIfActive)]="tabBaseActive">
      <clr-tab-content>
        <div class="config-content-container">
          <div class="base-left-config">
            <cs-input [inputIsRequired]="true"
                      [disabled]="isActionWip"
                      [inputPattern]="patternServiceName"
                      [inputLabel]="'SERVICE.STEP_3_SERVICE_NAME' | translate"
                      [customerValidatorAsyncFunc]="checkServiceNameFun"
                      [simpleFiled]="uiData.serviceName"
                      [inputPlaceholder]="'SERVICE.STEP_3_SERVICE_OF_NAME'| translate"
                      (onCheck)="setServiceName($event)">
            </cs-input>
            <div class="toggle-switch">
              <input type="checkbox"
                     id="toggle_public"
                     [disabled]="isActionWip"
                     [checked]="uiData.servicePublic"
                     [(ngModel)]="uiData.servicePublic">
              <label for="toggle_public" style="width: 180px;text-align: right">
                {{"SERVICE.STEP_3_PUBLIC" | translate}}:</label>
            </div>
            <cs-input [inputIsRequired]="true"
                      [inputFiledType]="1"
                      [inputMin]="1"
                      [inputMax]="99"
                      [disabled]="isActionWip"
                      [inputLabel]="'SERVICE.STEP_3_INSTANCE' | translate"
                      [simpleFiled]="uiData.instance"
                      (onCheck)="uiData.instance = $event">
            </cs-input>
            <div *ngIf="noPortForExtent" class="alert alert-warning" role="alert">
              {{"SERVICE.STEP_3_DANGER_MESSAGE" | translate}}
            </div>
            <config-card-list #source
                              [title]="'SERVICE.STEP_3_PORT' | translate"
                              [description]="'SERVICE.STEP_3_CONTAINER_DESCRIPTION' | translate"
                              [acceptDrag]="false"
                              [cardMinHeight]="50"
                              [disabled]="isActionWip"
                              [ConfigCardDataList]="containerSourceDataList">
            </config-card-list>
          </div>
          <div class="base-right-config">
            <config-card-list #external
                              [title]="'SERVICE.STEP_3_NODE_PORT' | translate"
                              [listBorder]="true"
                              [cardMinHeight]="80"
                              [acceptDrag]="true"
                              [sourceList]="source"
                              [disabled]="isActionWip"
                              [ConfigCardDataList]="uiData.externalServiceList"
                              (onDrop)="setExternalPort($event)">
            </config-card-list>
          </div>
        </div>
      </clr-tab-content>
    </ng-template>
  </clr-tab>
  <clr-tab>
    <button clrTabLink>{{"SERVICE.STEP_3_ADVANCED_CONFIG"|translate}}</button>
    <ng-template [(clrIfActive)]="tabAdvanceActive">
      <clr-tab-content>
        <div class="config-content-container">
          <div class="advance-left-config">
            <config-card-list #nodeSelector
                              [model]="'select'"
                              [title]="'SERVICE.STEP_3_NODE_SELECTOR' | translate"
                              [acceptDrag]="false"
                              [cardMinWidth]="160"
                              [cardMinHeight]="30"
                              [(selected)]="uiData.nodeSelector"
                              [disabled]="isActionWip"
                              [ConfigCardDataList]="nodeSelectorCardList">
            </config-card-list>
            <config-card-list #affinitySource
                              [title]="'SERVICE.STEP_3_COLLABORATIVE'|translate"
                              [acceptDrag]="false"
                              [cardMinWidth]="160"
                              [cardMinHeight]="30"
                              [description]="'SERVICE.STEP_3_AFFINITY_DESCRIPTION' | translate"
                              [disabled]="isActionWip"
                              [ConfigCardDataList]="affinitySourceDataList">
            </config-card-list>
          </div>
          <div class="advance-right-config">
            <a href="javascript:void(0)" (click)="addNewAffinity()">
              <clr-icon shape="plus"></clr-icon>
              {{"SERVICE.STEP_3_AFFINITY_SETTING" | translate}}
            </a>
            <div class="affinity-container" *ngFor="let affinity of uiData.affinityList;let i = index">
              <div class="toggle-switch">
                <input title="'affinity setting'"
                       [id]="i"
                       type="checkbox"
                       [checked]="affinity.flag"
                       [(ngModel)]="affinity.flag">
                <label [for]="i" *ngIf="affinity.flag">{{"SERVICE.STEP_3_AFFINITY_GROUP" | translate}}:</label>
                <label [for]="i" *ngIf="!affinity.flag">{{"SERVICE.STEP_3_REVERSE_AFFINITY_GROUP" | translate}}:</label>
                <a *ngIf="!isActionWip" href="javascript:void(0)" (click)="deleteAffinity(i)">
                  <clr-icon shape="trash"></clr-icon>
                </a>
              </div>
              <config-card-list [sourceList]="affinitySource"
                                [acceptDrag]="true"
                                [cardMinWidth]="160"
                                [cardMinHeight]="50"
                                [listMinHeight]="80"
                                [listBorder]="true"
                                [disabled]="isActionWip"
                                [ConfigCardDataList]="affinity.services">
              </config-card-list>
            </div>
          </div>
        </div>
      </clr-tab-content>
    </ng-template>
  </clr-tab>
</clr-tabs>
<div class="button-container">
  <button class="btn btn-default" (click)="cancelBuildService()" [disabled]="isActionWip">
    {{"BUTTON.CANCEL" | translate}}
  </button>
  <button class="btn btn-default" [disabled]="true">
    {{"BUTTON.TEST" | translate}}
  </button>
  <button class="btn btn-default" (click)="backUpStep()" [disabled]="isActionWip">
    {{"BUTTON.BACK" | translate}}
  </button>
  <button class="btn btn-default" (click)="forward()" [disabled]="noPortForExtent || isActionWip">
    {{"BUTTON.NEXT" | translate}}
  </button>
  <span *ngIf="isActionWip" class="spinner spinner-sm"></span>
</div>